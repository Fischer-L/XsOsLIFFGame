webpackJsonp([1],{0:function(e,t){},"7Kt7":function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMxLjExMiAzMS4xMTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMxLjExMiAzMS4xMTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiPgo8cG9seWdvbiBwb2ludHM9IjMxLjExMiwxLjQxNCAyOS42OTgsMCAxNS41NTYsMTQuMTQyIDEuNDE0LDAgMCwxLjQxNCAxNC4xNDIsMTUuNTU2IDAsMjkuNjk4IDEuNDE0LDMxLjExMiAxNS41NTYsMTYuOTcgICAyOS42OTgsMzEuMTEyIDMxLjExMiwyOS42OTggMTYuOTcsMTUuNTU2ICIgZmlsbD0iI2YwNzE3MSIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K"},"Ep/b":function(e,t){e.exports="data:image/png;base64,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"},HURy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),i=n("Xxa5"),a=n.n(i),o=n("exGp"),r=n.n(o),c=n("woOf"),u=n.n(c),d=n("//Fk"),l=n.n(d),m=n("DmT9"),g=n.n(m),f=n("uZGB"),h=n.n(f),p={EMPTY:"EMPTY",WAITING:"WAITING",PLAYING:"PLAYING",OVER:"OVER"},A="join",v="start_game",M="start_game_ack",I="update_game",C="game_over",x="leave_game",w={init:function(e){var t=e.utouId,n=e.player,s=e.store,i=e.gameSocket;this._socket?console.error("Cannot init the gameRoom more than once."):(this._store=s,this._socket=i,this._gameMsgHandlers={},this._store.subscribe(this.onStateChange.bind(this)),this._dispatch("set_utouId",t),this._dispatch("set_self_info",n),this._dispatch("set_game_state",p.WAITING))},playMove:function(e,t){var n=this;return r()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,n._dispatch("play_a_move",{cellIdx:e,value:t});case 3:n._socket.send({action:"update_game",game:n._store.state.game.slice()}),s.next=9;break;case 6:s.prev=6,s.t0=s.catch(0),console.error(s.t0);case 9:case"end":return s.stop()}},s,n,[[0,6]])}))()},leave:function(){this._dispatch("end_game")},get winner(){return this._checkWinner(this._store.state.game),this._winner},get winCells(){return this._checkWinner(this._store.state.game),this._winCells},_checkWinner:function(e){if(void 0===this._winner){var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=-3,s=3;this._store.state.isFirst&&(n=3,s=-3);for(var i=0;i<t.length;++i){var a=t[i].reduce(function(t,n){return t+e[n]},0);if(a===n?this._winner="self":a===s&&(this._winner="opponent"),this._winner){this._winCells=t[i];break}}void 0===this._winner&&void 0===e.find(function(e){return 0===e})&&(this._winner=this._winCells=null)}},_dispatch:function(e,t){return this._store.dispatch(e,t)},_addGameMsgHandler:function(e,t){this._gameMsgHandlers[e]||(this._gameMsgHandlers[e]=t)},_removeGameMsgHandler:function(e){"*"===e&&(this._gameMsgHandlers={}),this._gameMsgHandlers[e]&&(this._gameMsgHandlers[e]=void 0)},_startHandshake:function(){var e=this;this._addGameMsgHandler(A,this.onOpponentJoin),this._addGameMsgHandler(x,this.onOpponentLeave),this._addGameMsgHandler(v,this.onStartGameRequest);var t=this._store.state,n=t.self,s=t.utouId;this._socket.open({utouId:s,url:h.a.SOCKET_URL,userId:n.userId,onMsg:this.onSocketMsg.bind(this),onClose:function(){return e._dispatch("end_game")}}),this._socket.send({action:A,name:n.name,imgURL:n.imgURL})},_initGameplay:function(){this._addGameMsgHandler(I,this.onRecvUpdateGame),this._addGameMsgHandler(C,this.onRecvGameOver)},_disconnect:function(){if(this._socket&&this._socket.connected){var e=this._socket;this._socket=void 0,this._removeGameMsgHandler("*"),e.send({action:x}),setTimeout(function(){return e.close()},50)}},onStateChange:function(e,t){if("set_game_state"===e.type)switch(t.gameState){case p.WAITING:return void this._startHandshake();case p.PLAYING:return void this._initGameplay();case p.OVER:return void this._disconnect()}},onSocketMsg:function(e){var t=this;console.log("gameRoom> onSocketMsg =",e);var n=this._gameMsgHandlers[e.action];n&&requestAnimationFrame(function(){return n.call(t,e)})},onOpponentJoin:function(e){this._removeGameMsgHandler(A),this._removeGameMsgHandler(v),this._addGameMsgHandler(M,this.onStartGameAck);var t=this._store.state.self;this._socket.send({action:v,name:t.name,imgURL:t.imgURL}),this._dispatch("set_opponent_info",{userId:e.from,name:e.name,imgURL:e.imgURL||""})},onStartGameRequest:function(e){this._removeGameMsgHandler(A),this._removeGameMsgHandler(v),this._dispatch("set_opponent_info",{userId:e.from,name:e.name,imgURL:e.imgURL||""}),this._dispatch("start_game",!1),this._socket.send({action:M})},onStartGameAck:function(){this._removeGameMsgHandler(M),this._dispatch("start_game",!0)},onRecvUpdateGame:function(e){var t=this;return r()(a.a.mark(function n(){var s,i,o,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s=t._store.state.game,i=e.game,o=-1,r=0;case 4:if(!(r<9)){n.next=11;break}if(s[r]===e.game[r]){n.next=8;break}return o=r,n.abrupt("break",11);case 8:r++,n.next=4;break;case 11:if(!(o<0)){n.next=13;break}return n.abrupt("return");case 13:return n.prev=13,n.next=16,t._dispatch("receive_a_move",{cellIdx:o,value:i[o]});case 16:void 0!==t.winner&&(t._socket.send({action:C}),t._dispatch("end_game")),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(13),console.error(n.t0);case 22:case"end":return n.stop()}},n,t,[[13,19]])}))()},onRecvGameOver:function(){this._dispatch("end_game")},onOpponentLeave:function(){this._dispatch("end_game")}},L=n("pFYg"),_=n.n(L);var y={VERSION:3,init:function(e){this._socketIOClient?console.error("gameSocket> Init the socket again more than once"):this._socketIOClient=e},open:function(e){var t=this,n=e.url,s=e.userId,i=e.utouId,a=e.onClose,o=e.onMsg;this._conn?console.error("gameSocket> Connect the socket again with url =",n):(this._userId=s,this._utouId=i,this._seq=0,this.onMsg=o,this.onClose=a,this._conn=this._socketIOClient(n),this._conn.on("connect",function(){return t.connected=!0}),this._conn.on("disconnect",function(){t.connected=!1,t.onClose()}),this._conn.on("server_msg",function(e){return requestAnimationFrame(function(){return t.onMsg(e)})}))},close:function(){this._conn&&(this._conn.close(),this._conn=void 0,this.connected=!1)},formatPayload:function(e){return!(t=e)||"object"!=(void 0===t?"undefined":_()(t))||Array.isArray(t)?null:u()({},e,{seq:this._seq++,from:this._userId,utouId:this._utouId,version:this.VERSION});var t},send:function(e){var t=this.formatPayload(e);t?(console.log("gameSocket> send client_msg =",t),this._conn.emit("client_msg",t)):console.error("gameSocket> Send a socket message with invalid payload =",e)}},P={name:"UserBoard",props:{isSelf:{type:Boolean,required:!0},isPlaying:{type:Boolean,required:!0},player:{type:Object,required:!0}},computed:{className:function(){return{"gameBoard__userBoard--self":this.isSelf,"gameBoard__userBoard--currentPlayer":this.isPlaying}}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"gameBoard__userBoard",class:this.className},[this.player.userId?[t("img",{staticClass:"userBoard__picture",attrs:{src:this.player.imgURL}}),t("h3",{staticClass:"userBoard__name"},[this._v(this._s(this.player.name))])]:[t("h3",{staticClass:"userBoard__name--waiting"},[this._v("Waiting player...")])]],2)},staticRenderFns:[]};var B=n("VU/8")(P,b,!1,function(e){n("R54K")},null,null).exports,T=n("X6eH"),N=n.n(T),O=n("7Kt7"),R=n.n(O),k=n("Ep/b"),G=n.n(k),j=n("aDrp"),U=n.n(j);var D={DUMMY_SALLY_IMG:G.a,DUMMY_BROWN_IMG:U.a},S=["Just lucky to win","That was easy~","I can beat you 100 times~","Good game, thank you"],E={name:"XsOsGame",components:{UserBoard:B},computed:{_state:function(){return this.$store.state},cells:function(){var e=this._state.game,t=this._state.gameState===p.OVER?w.winCells:null;return e.map(function(e,n){var s=1===e?N.a:-1===e?R.a:"",i={};return[2,5,8].indexOf(n)>=0&&(i.borderRight="0"),[6,7,8].indexOf(n)>=0&&(i.borderBottom="0"),t&&t.indexOf(n)>=0&&(i.background="#f7d1cf"),{img:s,style:i,index:n}})},self:function(){return this.formatPlayerInfo("self")},opponent:function(){return this.formatPlayerInfo("opponent")}},methods:{formatPlayerInfo:function(e){var t=u()({},this._state[e]);return t.isPlaying=this._state.currentPlayer===e&&this._state.gameState===p.PLAYING,D[t.imgURL]&&(t.imgURL=D[t.imgURL]),t},_initLIFF:function(){var e=this;return new l.a(function(t){liff=function(e){return h.a.LOCAL_DEV?(e.init=function(e){e({context:{utouId:"utouId_123456789"}})},e.getProfile=function(){var e=""+Date.now();return l.a.resolve({userId:e,displayName:e,pictureUrl:""})},e.sendMessages=function(e){return console.log("liff.sendMessages =",e)},e):e}(liff);var n,s=(n=r()(a.a.mark(function n(s){var i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,liff.getProfile();case 2:i=e.sent,o={utouId:s.context.utouId,userId:i.userId,name:i.displayName,imgURL:i.pictureUrl||(Date.now()%2?"DUMMY_SALLY_IMG":"DUMMY_BROWN_IMG")},t(o);case 5:case"end":return e.stop()}},n,e)})),function(e){return n.apply(this,arguments)});liff.init(s)})},onClickCell:function(e){var t=this._state.game,n=parseInt(e.target.getAttribute("data-index"));if(0===t[n]&&"self"===this._state.currentPlayer&&this._state.gameState===p.PLAYING){var s=this._state.isFirst?1:-1;w.playMove(n,s)}}},mounted:function(){var e=this;return r()(a.a.mark(function t(){var n,s,i,o,r,c,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._initLIFF();case 2:n=t.sent,s=n.utouId,i=n.name,o=n.imgURL,r=n.userId,c={name:i,imgURL:o,userId:r},u=e.$store,y.init(g.a),w.init({utouId:s,player:c,store:u,gameSocket:y}),window.addEventListener("beforeunload",function(){return w.leave()});case 12:case"end":return t.stop()}},t,e)}))()},updated:function(){this._state.gameState===p.OVER&&"self"===w.winner&&liff.sendMessages([{type:"text",text:S[Date.now()%S.length]}])}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gameBoard xsos-full"},[n("UserBoard",{attrs:{isSelf:!1,player:e.opponent,isPlaying:e.opponent.isPlaying}}),e._v(" "),n("section",{staticClass:"gameBoard__playBoard",on:{click:e.onClickCell,touchend:function(t){return t.stopPropagation(),t.preventDefault(),e.onClickCell(t)}}},e._l(e.cells,function(t){return n("div",{staticClass:"playBoard__cell",style:t.style,attrs:{"data-index":t.index}},[t.img?n("img",{staticClass:"playBoard__cell-img",attrs:{src:t.img}}):e._e()])})),e._v(" "),n("UserBoard",{attrs:{isSelf:!0,player:e.self,isPlaying:e.self.isPlaying}})],1)},staticRenderFns:[]};var W=n("VU/8")(E,z,!1,function(e){n("gtLm")},null,null).exports,H={name:"App",components:{XsOsGame:W}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xsos-full",attrs:{id:"app"}},[t("XsOsGame")],1)},staticRenderFns:[]};var Y=n("VU/8")(H,F,!1,function(e){n("tzA0")},null,null).exports,Z=n("/ocq");s.a.use(Z.a);var V=new Z.a({routes:[{path:"/",name:"XsOsGame",component:W}]}),K=n("NYxO");s.a.use(K.a);var Q={set_game_state:function(e,t){e.gameState=t},set_utouId:function(e,t){e.utouId=t},set_self_info:function(e,t){var n=t.userId,s=t.name,i=t.imgURL;e.self={userId:n,name:s,imgURL:i}},set_opponent_info:function(e,t){var n=t.userId,s=t.name,i=t.imgURL;e.opponent={userId:n,name:s,imgURL:i}},is_my_turn:function(e,t){e.currentPlayer=t?"self":"opponent"},is_me_first:function(e,t){e.isFirst=t},update_game:function(e,t){e.game=t}},X={set_game_state:function(e,t){J({commit:e.commit,state:e.state},t)},set_utouId:function(e,t){(0,e.commit)("set_utouId",t)},set_self_info:function(e,t){(0,e.commit)("set_self_info",t)},set_opponent_info:function(e,t){(0,e.commit)("set_opponent_info",t)},start_game:function(e,t){var n=e.commit,s=e.state;n("is_my_turn",t),n("is_me_first",t),J({commit:n,state:s},p.PLAYING)},end_game:function(e){J({commit:e.commit,state:e.state},p.OVER)},play_a_move:function(e,t){var n=e.commit,s=e.state;return new l.a(function(e,i){var a=t.cellIdx,o=t.value;if("self"==s.currentPlayer&&q(s,a,o)){var r=s.game.slice();return r[a]=o,n("update_game",r),n("is_my_turn",!1),void e()}i()})},receive_a_move:function(e,t){var n=e.commit,s=e.state;return new l.a(function(e,i){var a=t.cellIdx,o=t.value;if("opponent"==s.currentPlayer&&q(s,a,o)){var r=s.game.slice();return r[a]=o,n("update_game",r),n("is_my_turn",!0),void e()}i()})}};function J(e,t){var n=e.commit;e.state.gameState!==t&&n("set_game_state",t)}function q(e,t,n){return t<0||t>8?(console.error("Play a value on an invalid cell of",t),!1):1!==n&&-1!==n?(console.error("Play an invalid value of",n),!1):0===e.game[t]||(console.error("Play a value on a occupied cell of",t,e.game),!1)}s.a.config.productionTip=!1,new s.a({el:"#app",router:V,components:{App:Y},template:"<App/>",store:new K.a.Store({state:{gameState:p.EMPTY,utouId:"",self:{userId:"",name:"",imgURL:""},opponent:{userId:"",name:"",imgURL:""},currentPlayer:"",isFirst:!1,game:[0,0,0,0,0,0,0,0,0]},strict:!0,mutations:Q,actions:X})})},R54K:function(e,t){},X6eH:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDYwIDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MCA2MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTJweCIgaGVpZ2h0PSI1MTJweCI+CjxwYXRoIGQ9Ik0zMCwwQzEzLjQ1OCwwLDAsMTMuNDU4LDAsMzBzMTMuNDU4LDMwLDMwLDMwczMwLTEzLjQ1OCwzMC0zMFM0Ni41NDIsMCwzMCwweiBNMzAsNThDMTQuNTYxLDU4LDIsNDUuNDM5LDIsMzAgIFMxNC41NjEsMiwzMCwyczI4LDEyLjU2MSwyOCwyOFM0NS40MzksNTgsMzAsNTh6IiBmaWxsPSIjNTRjNDVjIi8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo="},aDrp:function(e,t,n){e.exports=n.p+"static/img/brown.7ebd41b.jpg"},gtLm:function(e,t){},tzA0:function(e,t){},uZGB:function(e,t,n){"use strict";e.exports={LOCAL_DEV:!1,SOCKET_URL:"https://xs-os-liff-game.herokuapp.com"}}},["HURy"]);
//# sourceMappingURL=app.12a8ccc6d56df608bfd4.js.map